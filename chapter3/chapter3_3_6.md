# 3.3.6 UNWIND

> `UNWIND` 절은 목록의 데이터를 Row로 확장시키는 것 입니다.

* [소개](#chapter336_1)
* [목록 풀기](#chapter336_2)
* [중복방지 목록생성](#chapter336_3)
* [`UNWIND`안에 목록의 표현식 사용](#chapter336_4)
* [`UNWIND`에 이중목록 사용](#chapter336_5)
* [`UNWIND`에 공백목록 사용](#chapter336_6)
* [`UNWIND`에 목록이 아닌 표현식 사용](#chapter336_7)
* [목록 파라미터로 노드 생성](#chapter336_8)

## 3.3.6.1 소개 {#chapter336_1}

`UNWIND`로 목록을 각각의 행으로 변경할 수 있습니다. 변경하고자하는 목록은 파라미터로 전달될 수 도 있고, 직전의 `collect`로 생성된 목록 또는 다른 목록 표현식이 될 수 있습니다.

일반적인 `UNWIND`사용용도는 중복이 제거된 목록을 만들 때 사용됩니다. 다른 것은 쿼리에 제공된 파라미터 목록으로부터 데이터를 만들 때 입니다.

`UNWIND`는 내부 값을 위하여 꼭 이름을 지정해야 합니다.

## 3.3.6.2 목록 풀기 {#chapter336_2}

목록을 행으로 변경한 뒤 이름을 `x`로 해보겠습니다.

### 쿼리

```cypher
UNWIND [1, 2, 3, NULL ] AS x
RETURN x, 'val' AS y
```

`null`을 포함해서 원본 목록의 값이 각각의 행으로 변경되어 반환됩니다.

### 쿼리결과

```
+----------------+
| x      | y     |
+----------------+
| 1      | "val" |
| 2      | "val" |
| 3      | "val" |
| <null> | "val" |
+----------------+
4 rows
```

## 3.3.6.3 중복방지 목록생성 {#chapter336_3}

중복된 목록을 `DISTINCT` 절을 활용하여 변환할 수 있습니다.

### 쿼리

```cypher
WITH [1, 1, 2, 2] AS coll
UNWIND coll AS x
WITH DISTINCT x
RETURN collect(x) AS SET
```

원본 목록이 풀어진 뒤 유일한 집합으로 변경되기 위해 `DISTINCT`에 전달됩니다.

### 쿼리결과

```
+-------+
| set   |
+-------+
| [1,2] |
+-------+
1 row
```

## 3.3.6.4 `UNWIND`안에 목록의 표현식 사용 {#chapter336_4}

목록을 반환하는 표현식을 `UNWIND`에 사용할 수 있습니다.

### 쿼리

```cypher
WITH [1, 2] AS a,[3, 4] AS b
UNWIND (a + b) AS x
RETURN x
```

`a`와 `b` 목록을 새로운 한개 목록으로 합친 뒤, `UNWIND`로 처리하는 것 입니다.

### 쿼리결과

```
+---+
| x |
+---+
| 1 |
| 2 |
| 3 |
| 4 |
+---+
4 rows
```

## 3.3.6.5 `UNWIND`에 이중목록 사용 {#chapter336_5}

목록안의 목록을 풀기 위해서는 `UNWIND` 절을 연결해서 사용하시면 됩니다.

### 쿼리

```cypher
WITH [[1, 2],[3, 4], 5] AS nested
UNWIND nested AS x
UNWIND x AS y
RETURN y
```

첫번째 `UNWIND`로 2개의 목록을 포함한 원본목록이 `[1, 2]`, `[3, 4]`, `5`로 3개의 행으로 반환되며 이름은 `x`가 됩니다. 두번째 `UNWIND`로 각각의 행이 풀어져서 총 5개의 행으로 반환되며 이름은 `y`가 됩니다.

### 쿼리결과

```
+---+
| y |
+---+
| 1 |
| 2 |
| 3 |
| 4 |
| 5 |
+---+
5 rows
```

## 3.3.6.6 `UNWIND`에 공백목록 사용 {#chapter336_6}



## 3.3.6.7 `UNWIND`에 목록이 아닌 표현식 사용 {#chapter336_7}

## 3.3.6.8 목록 파라미터로 노드 생성 {#chapter336_8}

